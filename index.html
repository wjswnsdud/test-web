<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>특정소방대상물 용도별 필요 소방시설 검색</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .result-container {
            display: none;
            margin-top: 20px;
        }

        .notes {
            margin-top: 40px;
            border-top: 1px solid #ddd;
            padding-top: 20px;
            display:  none;
        }
    </style>
</head>

<body>
    <div class="container my-5">
        <h1 class="text-center">용도별 필요 소방시설 검색</h1>

        <!-- 선택 메뉴 -->
        <div class="row justify-content-center">
            <div class="col-md-6">
                <label for="buildingType" class="form-label">특정소방대상물 용도를 선택하세요:</label>
                <select id="buildingType" class="form-select">
                    <option value="" selected>-- 선택 --</option>
                    <option value="아파트">아파트</option>
                    <option value="터널">터널</option>
                </select>

                <!-- 아파트 옵션 -->
                <div id="apartOptions" class="mt-3" style="display: none;">
                    <label for="apartArea" class="form-label">연면적 (㎡):</label>
                    <input type="number" id="apartArea" class="form-control" placeholder="연면적을 입력하세요">

                    <label for="groundFloors" class="form-label mt-3">지상층 층수:</label>
                    <input type="number" id="groundFloors" class="form-control" placeholder="지상층 층수를 입력하세요">

                    <label for="basementFloors" class="form-label mt-3">지하층 층수:</label>
                    <input type="number" id="basementFloors" class="form-control" placeholder="지하층 층수를 입력하세요">

                    <label for="basementAreaSum" class="form-label mt-3">지하층 바닥면적 합계 (㎡):</label>
                    <input type="number" id="basementAreaSum" class="form-control" placeholder="지하층 바닥면적 합계를 입력하세요">
                </div>

                <!-- 터널 옵션 -->
                <div id="tunnelOptions" class="mt-3" style="display: none;">
                    <label for="tunnelLength" class="form-label">터널의 길이를 선택하세요:</label>
                    <select id="tunnelLength" class="form-select">
                        <option value="" selected>-- 선택 --</option>
                        <option value="short">0 ≤ 길이 < 500m</option>
                        <option value="medium">500m ≤ 길이 < 1000m</option>
                        <option value="long">1000m ≤ 길이</option>
                    </select>

                    <label for="isSpecialTunnel" class="form-label mt-3">행정안전부령으로 정하는 터널인가요?</label>
                    <select id="isSpecialTunnel" class="form-select">
                        <option value="" selected>-- 선택 --</option>
                        <option value="no">아니요</option>
                        <option value="yes">예</option>
                    </select>
                </div>

                <!-- 검색 버튼 -->
                <button class="btn btn-primary mt-3" id="searchButton" type="button">검색</button>
            </div>
        </div>

        <!-- 검색 결과 -->
        <div class="result-container" id="resultContainer">
            <h5>필요 소방시설:</h5>
            <ul id="resultList"></ul>
        </div>

        <!-- 고정된 참고사항 -->
        <div class="container notes" id="notesContainer">
            <h6>※ 추가 참고사항</h6>
            <ul id="notesList">
                <li>옥내소화전설비: 지하층·무창층·4층이상인 층이 바닥면적이 600㎡ 이상인 층이 있는 경우 모든 층에 설치.</li>
                <li>스프링클러설비: 지하층·무창층·4층이상인 층이 바닥면적이 1000㎡ 이상인 층이 있는 경우 해당 층에 설치.</li>
                <li>물분무등소화설비:
                    <ol>(1)내부 차고·주차장 용도 사용면적 200㎡ 이상인 경우 해당 층에 설치.</ol>
                    <ol>(2)전기실·발전실·변전실·축전지실·통신기기실·전산실 바닥면적 300㎡ 이상인 경우 해당 층에 설치.</ol>
                </li>
                <li>비상경보설비: 지하층·무창층 바닥면적 150㎡ 이상인 층이 있는 경우 모든 층에 설치.</li>
                <li>비상조명등: 지하층·무창층 바닥면적 450㎡ 이상인 층이 있는 경우 해당 층에 설치</li>
                <li>제연설비: 특별피난계단 및 비상용승강기의 승강장</li>
                <li>연결살수설비: 대피시설로 사용하는 지하층 바닥면적의 합계가 700㎡ 이상인 경우 지하층의 모든 층에 설치</li>
            </ul>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.getElementById('buildingType').addEventListener('change', () => {
            const buildingType = document.getElementById('buildingType').value;
            document.getElementById('apartOptions').style.display = (buildingType === '아파트') ? 'block' : 'none';
            document.getElementById('tunnelOptions').style.display = (buildingType === '터널') ? 'block' : 'none';
            document.getElementById('resultContainer').style.display = 'none'; // 검색 결과 초기화

            notesContainer.style.display = (buildingType === '아파트') ? 'block' : 'none';
        });

        document.getElementById('searchButton').addEventListener('click', () => {
            const buildingType = document.getElementById('buildingType').value;
            const resultContainer = document.getElementById('resultContainer');
            const resultList = document.getElementById('resultList');
            resultList.innerHTML = ''; // 결과 초기화

            if (buildingType === '아파트') {
                const apartArea = parseFloat(document.getElementById('apartArea').value);
                const groundFloors = parseInt(document.getElementById('groundFloors').value, 10);
                const basementFloors = parseInt(document.getElementById('basementFloors').value, 10);
                const basementAreaSum = parseFloat(document.getElementById('basementAreaSum').value);

                if (!apartArea || !groundFloors || !basementFloors || !basementAreaSum) {
                    alert('모든 입력값을 입력해주세요.');
                    return;
                }

                const facilities = [];
                if (apartArea >= 33) facilities.push('소화기구');
                facilities.push('자동소화장치(주방)');
                if (apartArea >= 3000) facilities.push('옥내소화전설비');
                if (apartArea >= 5000 || groundFloors >= 6) facilities.push('스프링클러설비(모든 층)');
                if (basementAreaSum >= 200) facilities.push('물분무소화설비');
                if (apartArea >= 400) facilities.push('비상경보설비');
                facilities.push('자동화재탐지설비(모든 층)');
                if (apartArea >= 3500 || groundFloors >= 11 || basementFloors >= 3) facilities.push('비상방송설비(모든 층)');
                facilities.push('피난기구(피난층 제외 지상3층~지상10층까지 설치) *150세대 이상으로 승강기가 설치된 공동주택은 공기안전매트 설치');
                facilities.push('인명구조기구(이산화탄소소화설비가 설치 장소)');
                facilities.push('아파트 소형유도등');
                if (groundFloors + basementFloors >= 5 && apartArea >= 3000) facilities.push('비상조명등');
                if (groundFloors >= 5000) facilities.push('상수도소화용수설비');
                if (groundFloors >= 5 && apartArea >= 6000) facilities.push('연결송수관설비(모든 층)');
                else if (groundFloors + basementFloors >= 7) facilities.push('연결송수관설비(모든 층)');
                else if (basementFloors >=3 && basementAreaSum >= 1000) facilities.push('연결송수관설비(모든 층)');
                if (groundFloors >= 11) facilities.push('비상콘센트설비(11층 이상의 층)');
                if (basementFloors >= 3 && basementAreaSum >= 1000) facilities.push('비상콘센트설비(지하층의 모든 층)');
                if (basementAreaSum >= 3000) facilities.push('무선통신보조설비(지하층의 모든 층)');
                else if (basementFloors >= 3 && basementAreaSum >= 1000) facilities.push('무선통신보조설비(지하층의 모든 층)');
                else if (groundFloors >= 30) facilities.push('무선통신보조설비(16층 이상의 층)');

                resultList.innerHTML = facilities.length
                    ? facilities.map(facility => `<li>${facility}</li>`).join('')
                    : '<li>조건에 맞는 소방시설이 없습니다.</li>';
            } else if (buildingType === '터널') {
                const tunnelLength = document.getElementById('tunnelLength').value;
                const isSpecialTunnel = document.getElementById('isSpecialTunnel').value;

                if (!tunnelLength || !isSpecialTunnel) {
                    alert('모든 입력값을 입력해주세요.');
                    return;
                }

                if (isSpecialTunnel === 'yes') {
                    resultList.innerHTML = `
                        <li>옥내소화전설비</li>
                        <li>물분무등소화설비</li>
                        <li>제연설비</li>`;
                } else {
                    switch (tunnelLength) {
                        case 'short':
                            resultList.innerHTML = `<li>소화기구</li>`;
                            break;
                        case 'medium':
                            resultList.innerHTML = `
                                <li>소화기구</li>
                                <li>비상경보설비</li>
                                <li>비상조명등</li>`;
                            break;
                        case 'long':
                            resultList.innerHTML = `
                                <li>소화기구</li>
                                <li>옥내소화전설비</li>
                                <li>연결송수관설비</li>`;
                            break;
                    }
                }
            }

            resultContainer.style.display = 'block';
        });
    </script>
</body>

</html>
